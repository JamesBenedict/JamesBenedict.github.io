YUI.add("hermes-template-albums-list-page",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function h(e,t){var r="",i;r+="\n		",i=n["if"].call(e,e.isViewingSelf,{hash:{},inverse:c.program(4,d,t),fn:c.program(2,p,t),data:t});if(i||i===0)r+=i;return r+="\n	",r}function p(e,t){var r="",i,s;return r+='\n		<div class="photolist-empty">\n			<h4>',s={hash:{intlName:"magic-empty-states.ALBUM_EMPTY"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+'</h4>\n			<a class="butt medium" href="/photos/organize/?start_tab=sets">',s={hash:{intlName:"magic-empty-states.ALBUM_EMPTY_ACTION"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</a>\n		</div>\n		",r}function d(e,t){var r="",i,s;return r+='\n		<div class="photolist-empty">\n			<h4>',s={hash:{intlName:"magic-empty-states.ALBUM_EMPTY_OTHER"},data:t},r+=l((i=n.intlMessage||e.intlMessage,i?i.call(e,s):f.call(e,"intlMessage",s)))+"</h4>\n		</div>\n		",r}function v(e,t){var r="",i,s;return r+="\n		",s={hash:{},data:t},r+=l((i=n.outlet||e.outlet,i?i.call(e,e["pagination-view"],s):f.call(e,"outlet",e["pagination-view"],s)))+"\n	",r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a,f=n.helperMissing,l=this.escapeExpression,c=this;a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["global-nav-view"],a):f.call(t,"outlet",t["global-nav-view"],a)))+"\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["fluid-header"],a):f.call(t,"outlet",t["fluid-header"],a)))+"\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t.subnav,a):f.call(t,"outlet",t.subnav,a)))+"\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["album-list-toolbar-view"],a):f.call(t,"outlet",t["album-list-toolbar-view"],a)))+'\n\n<div role="main" class="albums-list-container fluid-centered">\n	',u=n["if"].call(t,t.isEmpty,{hash:{},inverse:c.noop,fn:c.program(1,h,i),data:i});if(u||u===0)s+=u;s+="\n	",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["photo-list-view"],a):f.call(t,"outlet",t["photo-list-view"],a)))+"\n\n\n	",u=n["if"].call(t,t.showPagination,{hash:{},inverse:c.noop,fn:c.program(6,v,i),data:i});if(u||u===0)s+=u;return s+="\n\n</div>\n\n",a={hash:{},data:i},s+=l((o=n.outlet||t.outlet,o?o.call(t,t["footer-full-view"],a):f.call(t,"outlet",t["footer-full-view"],a))),s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/albums-list-page",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-pagination-view",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function f(e,t){var r="",i;r+="\n\n	",i=n["if"].call(e,e.leftUrl,{hash:{},inverse:a.program(4,c,t),fn:a.program(2,l,t),data:t});if(i||i===0)r+=i;r+="\n	",i=n.each.call(e,e.pages,{hash:{},inverse:a.noop,fn:a.program(6,h,t),data:t});if(i||i===0)r+=i;r+="\n	",i=n["if"].call(e,e.rightUrl,{hash:{},inverse:a.program(16,y,t),fn:a.program(14,g,t),data:t});if(i||i===0)r+=i;return r+="\n\n",r}function l(e,t){var r="",i;return r+='\n		<a href="',(i=n.leftUrl)?i=i.call(e,{hash:{},data:t}):(i=e.leftUrl,i=typeof i===o?i.apply(e):i),r+=u(i)+'" rel="prev" data-track="paginationLeftClick"><span><i class="page-arrow"></i></span></a>\n	',r}function c(e,t){return'\n		<span class="disabled"><i class="page-arrow"></i></span>\n	'}function h(e,t){var r="",i;r+="\n		",i=n["if"].call(e,e.isMore,{hash:{},inverse:a.program(9,d,t),fn:a.program(7,p,t),data:t});if(i||i===0)r+=i;return r+="\n	",r}function p(e,t){return'\n			<span class="moredots">\u2022\u2022\u2022</span>\n		'}function d(e,t){var r="",i,s;r+='\n			<a href="'+u((i=e.url,typeof i===o?i.apply(e):i))+'" ',s=n["if"].call(e,e.rel,{hash:{},inverse:a.noop,fn:a.program(10,v,t),data:t});if(s||s===0)r+=s;r+=' data-track="pagination'+u((i=e.text,typeof i===o?i.apply(e):i))+'Click"><span',s=n["if"].call(e,e.isCurrent,{hash:{},inverse:a.noop,fn:a.program(12,m,t),data:t});if(s||s===0)r+=s;return r+=">"+u((i=e.text,typeof i===o?i.apply(e):i))+"</span></a>\n		",r}function v(e,t){var r="",i;return r+="rel='",(i=n.rel)?i=i.call(e,{hash:{},data:t}):(i=e.rel,i=typeof i===o?i.apply(e):i),r+=u(i)+"'",r}function m(e,t){return' class="is-current"'}function g(e,t){var r="",i;return r+='\n		<a href="',(i=n.rightUrl)?i=i.call(e,{hash:{},data:t}):(i=e.rightUrl,i=typeof i===o?i.apply(e):i),r+=u(i)+'" rel="next" data-track="paginationRightClick"><span><i class="page-arrow right"></i></span></a>\n	',r}function y(e,t){return'\n		<span class="disabled"><i class="page-arrow right"></i></span>\n	'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s,o="function",u=this.escapeExpression,a=this;return s=n.unless.call(t,t.hide,{hash:{},inverse:a.noop,fn:a.program(1,f,i),data:i}),s||s===0?s:""}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/pagination-view",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("hermes-template-head-link",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){function c(e,t){var r="",i;return r+='id="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function h(e,t){var r="",i;return r+='rev="',(i=n.rev)?i=i.call(e,{hash:{},data:t}):(i=e.rev,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function p(e,t){var r="",i;return r+='rel="',(i=n.rel)?i=i.call(e,{hash:{},data:t}):(i=e.rel,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function d(e,t){var r="",i;return r+='type="',(i=n.type)?i=i.call(e,{hash:{},data:t}):(i=e.type,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function v(e,t){var r="",i;return r+='media="',(i=n.media)?i=i.call(e,{hash:{},data:t}):(i=e.media,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function m(e,t){var r="",i;return r+='href="',(i=n.href)?i=i.call(e,{hash:{},data:t}):(i=e.href,i=typeof i===u?i.apply(e):i),r+=a(i)+'"',r}function g(e,t){var r="",i,s;return r+='data-dynamic-added-by="',s={hash:{},data:t},r+=a((i=n.obfuscateInternals||e.obfuscateInternals,i?i.call(e,e.addedBy,s):f.call(e,"obfuscateInternals",e.addedBy,s)))+'"',r}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u="function",a=this.escapeExpression,f=n.helperMissing,l=this;s+="<link ",o=n["if"].call(t,t.id,{hash:{},inverse:l.noop,fn:l.program(1,c,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.rev,{hash:{},inverse:l.noop,fn:l.program(3,h,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.rel,{hash:{},inverse:l.noop,fn:l.program(5,p,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.type,{hash:{},inverse:l.noop,fn:l.program(7,d,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.media,{hash:{},inverse:l.noop,fn:l.program(9,v,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.href,{hash:{},inverse:l.noop,fn:l.program(11,m,i),data:i});if(o||o===0)s+=o;s+=" ",o=n["if"].call(t,t.addedBy,{hash:{},inverse:l.noop,fn:l.program(13,g,i),data:i});if(o||o===0)s+=o;return s+=' data-dynamic="true" />',s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/head-link",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("pagination-view",function(e){var t=7,n=2;e.namespace("Views")[this.name]=e.Base.create("pagination-view",e.FlickrView,[],{initializer:function(e){return this.modelKey=e.pageParams&&e.pageParams.idAttribute?e[e.pageParams.idAttribute]:e.nsid,this.baseURL=e.baseURL.replace(/\/with\/[0-9]+/,""),this.modelRegistryName=e.modelRegistryName,this.maxNumAttrName=e.maxNumAttrName||"totalItems",this.pageParams=e.pageParams,this.paginationSuffix=e.paginationSuffix||"",this.hideMorePages=e.hideMorePages||!1,this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){var e=this,t;return this.appContext.getModel(this.modelRegistryName,this.modelKey).then(function(n){e.model=n,e.numPages=Math.ceil(e.model.getValue(e.maxNumAttrName)/e.pageParams.viewPageSize),e.registerEventHandler(e.model.on("valuesChanged",function(n){n[e.maxNumAttrName]&&(t=Math.ceil(n[e.maxNumAttrName].newVal/e.pageParams.viewPageSize),t!==e.numPages&&(e.numPages=t,e.buildContainer()))}))})},buildContainer:function(){var e=[],t=this.baseURL+"page",n,r,i;return i=this.getPaginationURLs(),r=i.nextURL,n=i.prevURL,e=this.calcPages(t,i.getParamsInUrl),this.setContainerHTML(this.templates("pagination-view")({leftUrl:n,rightUrl:r,pages:e,hide:e.length===1})),this},buildHeadContainer:function(){var e,t,n,r,i="";if(!this.pageParams.nominalPage)return;r=this.getPaginationURLs(),e=r.currentURL,t=r.nextURL,n=r.prevURL,i+=this.templates("head-link")({rel:"canonical",href:e}),n&&(i+=this.templates("head-link")({rel:"prev",href:n})),t&&(i+=this.templates("head-link")({rel:"next",href:t})),this.set("headContainer",i),YUI.Env.isServer||this.updateHead()},getPaginationURLs:function(){var t=this.baseURL+"page",n,r,i,s;return YUI.Env.isServer?this.paginationSuffix&&(s=this.paginationSuffix):s=e.config.win.location.search,s||(s=""),n=t+this.pageParams.nominalPage.toString()+s,this.pageParams.nominalPage>1&&this.numPages>1&&(i=t+(this.pageParams.nominalPage-1).toString()+s),this.pageParams.nominalPage<this.numPages&&this.numPages>1&&(r=t+(this.pageParams.nominalPage+1).toString()+s),{currentURL:n,nextURL:r,prevURL:i,getParamsInUrl:s}},activate:function(){return this},calcPages:function(e,r){function u(t){var n=(t+1).toString(),s=i.pageParams.nominalPage===t+1,o=i.pageParams.nominalPage===t,u=i.pageParams.nominalPage===t+2;return{url:e+n+r,text:n,isMore:!1,isCurrent:s,rel:u?"prev":o?"next":null}}var i=this,s=[],o;if(this.numPages<=t)for(o=0;o<this.numPages;o++)s.push(u(o));else if(this.pageParams.nominalPage<=t-1){for(o=0;o<t;o++)s.push(u(o));if(!this.hideMorePages){this.numPages>t+n&&s.push({isMore:!0});for(o=Math.max(t,this.numPages-n);o<this.numPages;o++)s.push(u(o))}}else if(this.pageParams.nominalPage>this.numPages-(t-1)){if(!this.hideMorePages){for(o=0;o<Math.min(this.numPages-t,n);o++)s.push(u(o));this.numPages>t+n&&s.push({isMore:!0})}for(o=this.numPages-t;o<this.numPages;o++)s.push(u(o))}else{if(!this.hideMorePages){for(o=0;o<n;o++)s.push(u(o));s.push({isMore:!0})}for(o=this.pageParams.nominalPage-Math.ceil(t/2);o<this.pageParams.nominalPage+Math.floor(t/2);o++)s.push(u(o));if(!this.hideMorePages){s.push({isMore:!0});for(o=this.numPages-n;o<this.numPages;o++)s.push(u(o))}}return s}})},"@VERSION@",{requires:["flickr-view","hermes-template-pagination-view","hermes-template-head-link","pagination-view-css"],optional:[]});
YUI.add("fluid-share-album-view",function(e,t){e.namespace("Views").FluidShareAlbumView=e.FlickrView.create(this.name,e.namespace("Views")["fluid-share-view"],[],{langBundles:this.details.langBundles,subClassName:t,initializer:function(e){return this.albumId=e.albumId,this.constructor.superclass.buildContainer.call(this,{extraShareButtonIconClassList:"share-album-icon",sharingDisabled:!0,shareTooltip:this.intlMessage({intlName:"share-modal.SHARE_ALBUM"})}),this.constructor.superclass.initializer.call(this,e)},loadState:function(){return this.isEnglishLang?e.Promise.resolve():this.loadRequiredModels()},getItemCount:function(){return this.isEnglishLang?this.loadRequiredModels():e.Promise.resolve(1)},loadRequiredModels:function(){var t=this,n=1;return e.Promise.all([this.appContext.getModel("set-models",this.albumId+"-"+n,{filter:n,perPage:5,page:1}),this.appContext.getModel("album-privacy-models",this.albumId),this.appContext.getModel("set-models",this.albumId)]).then(function(e){t.set("albumModel",e[0]),t.set("privacyModel",e[1]),t.isDisabled=!e[0].getValue("canShare"),t.set("photos",e[0].getValue("photoPageList").getList()),t.set("fullAlbum",e[2]),e[2].on("valuesChanged",function(e){var n={};e&&(Object.keys(e).forEach(function(r){var i=e[r];i.id===t.albumId&&(n[r]=i.newVal)}),Object.keys(n).length>0&&t.get("albumModel").setValues(n))})},function(n){e.Flog.error(t.name,"failed to get models")})},buildContainer:function(){return this.constructor.superclass.buildContainer.call(this,{extraShareButtonIconClassList:"share-album-icon",sharingDisabled:this.isDisabled,shareTooltip:this.intlMessage({intlName:"share-modal.SHARE_ALBUM"})}),this},prepareFacebookShareParameters:function(){return{url:this.get("albumModel").getValue("url")}},prepareTwitterShareParameters:function(){var t=this.get("fullAlbum");return{url:e.URLHelper.getShortAlbumURL(t.getValue("normalizedId")),title:t.getValue("title")}},prepareTumblrShareParameters:function(){var e=this.get("fullAlbum");return{title:e.getValue("title"),authorURL:e.getValue("owner").getValue("url"),ownerName:e.getValue("owner").getValue("displayname"),description:e.getValue("description"),displayPhotoURL:this.get("photos").map(function(e){return e.getLargestSize().url}),url:e.getValue("url"),tags:"Flickr"}},preparePinterestShareParameters:function(){var t=this.get("fullAlbum");return{title:t.getValue("title"),description:t.getValue("description"),displayPhotoURL:this.get("photos").length>0?this.get("photos")[0].getLargestSize().url:null,shortURL:e.URLHelper.getShortAlbumURL(t.getValue("normalizedId")),url:t.getValue("url"),count:1}},prepareFlickrShareParameters:function(){var e=this.get("fullAlbum");return{modelName:"set",modelId:this.albumId,modelOwnerId:e.getValue("owner").id,title:e.getValue("title"),url:e.getValue("url"),count:1}},prepareLinkShareParameters:function(){var t=this.get("albumModel"),n=this.get("fullAlbum"),r,i,s,o=!1;r=this.intlMessage({intlName:"share-modal.ALBUM_PRIVACY_WARNING",photoCount:n.getValue("totalCount")});if(this.appContext.flipper.isFlipped("enable-album-download")&&this.appContext.lang==="en-US"&&n.getValue("owner").getValue("isMe")){o=!0;switch(this.appContext.getViewer().prefs.downloadAccessPref){case 4:s="ALBUM_DOWNLOAD_ACCESS_YOU";break;case 3:s="ALBUM_DOWNLOAD_ACCESS_FF";break;case 2:s="ALBUM_DOWNLOAD_ACCESS_FOLLOWING";break;case 1:s="ALBUM_DOWNLOAD_ACCESS_MEMBERS";break;case 0:s="ALBUM_DOWNLOAD_ACCESS_EVERYONE"}s&&(i=this.intlMessage({intlName:"share-modal."+s,photoCount:n.getValue("totalCount")}))}return{sizes:t.getValue("primaryPhotoSizes"),url:n.getValue("url"),title:n.getValue("title"),author:n.getValue("owner").getValue("displayname"),authorURL:n.getValue("owner").getValue("url"),shortURL:e.URLHelper.getShortAlbumURL(n.getValue("normalizedId")),supportsEmbedr:this.appContext.flipper.isFlipped("enable-embedr-in-share")&&this.appContext.flipper.isFlipped("enable-embedr-in-albums"),supportsBBCode:!1,privacyWarningString:r,showDownloadWarning:o,downloadAccessString:i}},getTitleIntlKey:function(){return"SHARE_ALBUM_TO"},getGuestPassParams:function(){var e=this.get("privacyModel"),t=this.get("fullAlbum").getValue("owner").getValue("isMe"),n=e.getValue("countPhotosPublic"),r=e.getValue("countPhotosFriendFamily"),i=e.getValue("countPhotosFriend"),s=e.getValue("countPhotosFamily"),o=this.get("privacyModel").getValue("totalCount")-n,u=t&&r>0&&r!==n,a=t&&i>0&&i!==n,f=t&&s>0&&s!==n,l=!1;u&&i===r&&(a=!1),u&&s===r&&(f=!1);if(o>0||u||f||a)l=!0;return{type:"set",id:this.get("albumModel").getValue("normalizedId"),contentMarkedFriends:a,contentMarkedFamily:f,contentMarkedFriendFamily:u,contentMarkedPublic:n,canSharePrivate:l&&t,showGuestPassDropdown:t&&n!==this.get("fullAlbum").getValue("totalCount"),multipleItems:!0}},getIsMine:function(){return this.get("albumModel").getValue("isOwner")}})},"@VERSION@",{requires:["flickr-view","flickr-promise","fluid-share-view","url-helper","flog"],langBundles:[]});
YUI.add("hermes-template-album-list-toolbar",function(e,t){var n=e.Template.Handlebars.revive(function(e,t,n,r,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var s="",o,u,a=n.helperMissing,f=this.escapeExpression;return s+='<div class="album-toolbar-content">\n	<a class="create-album" href="/photos/organize/?start_tab=new_set"><i></i><span>',u={hash:{intlName:"album-page.CREATE_NEW_ALBUM"},data:i},s+=f((o=n.intlMessage||t.intlMessage,o?o.call(t,u):a.call(t,"intlMessage",u)))+"</span></a>\n</div>\n",s}),r={};e.Array.each([],function(t){var n=e.Template.get("hermes/"+t);n&&(r[t]=n)}),e.Template.register("hermes/album-list-toolbar",function(t,i){return i=i||{},i.partials=i.partials?e.merge(r,i.partials):r,n(t,i)})},"@VERSION@",{requires:["template-base","handlebars-base"]});
YUI.add("album-list-toolbar-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{},initializer:function(e){return this.get("container").get("innerHTML")===""&&this.setContainerHTML(""),this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){var e=this.templates("album-list-toolbar")({});return this.setContainerHTML(e),this},buildErrorContainer:function(){},activate:function(){return this}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-list-toolbar","albums-list-page-css"],optional:[],langBundles:["album-page","common"]});
YUI.add("photolist-aft-helper",function(e){"use strict";e.PhotolistAftHelper=function(e){var t=e.onSubviewEvent;this.appContext=e.appContext,this.viewName=e.name,YUI.Env.isServer||this.appContext.clientMetrics.setPendingMeasurement(e.name,!0),e.onSubviewEvent=function(n,r){(r&&r[0]==="atfVisible"||r[0]==="atfActivated")&&this.aftHelper.handleAFTResult(n,r),t&&t.call(e,n,r)}},e.PhotolistAftHelper.prototype.handleAFTResult=function(e,t){var n=t[0];this.paftResults||(this.paftResults={},this.paftResults[e]={}),this.paftResults[e][n]=t[1]||(new Date).getTime(),this.beaconIfAllAFTResultsComplete(n)},e.PhotolistAftHelper.prototype.beaconIfAllAFTResultsComplete=function(t){var n=0,r;if(this.allResultsReceived)return;if(!this.paftResults)return;this.allResultsReceived=Object.keys(this.paftResults).every(function(e){return r=this.paftResults[e][t],typeof r=="undefined"?!1:(r>n&&(n=r),!0)}.bind(this)),this.allResultsReceived&&t==="atfVisible"&&(this.appContext.hasClientSideRouted()?(this.appContext.clientMetrics.mark("AFT_CL",n),this.appContext.clientMetrics.mark("AFT",n)):(e.config.win.performance&&e.config.win.performance.timing&&(n-=e.config.win.performance.timing.navigationStart),this.appContext.clientMetrics.record("AFT_SV",n),this.appContext.clientMetrics.record("AFT",n)),this.appContext.clientMetrics.setPendingMeasurement(this.viewName,!1),this.appContext.clientMetrics.beacon())}},"@VERSION@",{affinity:"",requires:["flickr-promise","event-custom"]});
YUI.add("albums-list-page-view",function(e){e.namespace("Views")[this.name]=e.Base.create("albums-list-page-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.nsid=t.nsid,this.isOwner=t.isOwner,this.withSetId=t.withSetId,this.pageParams=t.pageParams,t.modelRegistryName="sets-models",t.photoListConfig={modelParams:{registryName:"sets-models",modelIdOrAttributes:t.nsid,collectionAttributeName:"albumsList"},interactionViewName:"photo-list-album-interaction-view",engagementModelName:"set-models",viewBeaconRestrictedAttribute:"primaryNeedsInterstitial",parentName:this.name,pageParams:t.pageParams,viewBeaconAttribute:"primary",measureAFT:!0,maintainScrollPosition:!1,scrollToWithId:t.withSetId},t.photoListConfig.layout={targetRowHeight:240,forceAspectRatio:1,containerPadding:{top:8,right:0,bottom:8,left:0},itemSpacing:{horizontal:32,vertical:32}},t.subnavConfig={selected:"albums"},this.aftHelper=new e.PhotolistAftHelper(this),this},subviewConfig:{"global-nav-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"fluid-photostream-coverphoto-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"fluid-magic-subnav-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"album-list-toolbar-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:["fluid-centered"]},"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"pagination-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0}},loadState:function(){var e=this;return this.appContext.getModel("sets-models",this.nsid).then(function(t){e.set("albumsListModel",t),e.set("totalItems",t.getValue("totalItems"))})},buildContainer:function(){var e,t=this.get("totalItems"),n,r;return r=this.pageParams.page>1||t>Math.abs((this.pageParams.viewPageSize||20)*(this.pageParams.page||1)),n=this.nsid===this.appContext.getViewer().nsid&&t>0,e={"global-nav-view":this.subviews["global-nav-view"].get("container"),"fluid-header":this.subviews["fluid-photostream-coverphoto-view"]?this.subviews["fluid-photostream-coverphoto-view"].get("container"):"",subnav:this.subviews["fluid-magic-subnav-view"]?this.subviews["fluid-magic-subnav-view"].get("container"):"","photo-list-view":this.subviews["photo-list-view"].get("container"),"pagination-view":this.subviews["pagination-view"].get("container"),"album-list-toolbar-view":n?this.subviews["album-list-toolbar-view"].get("container"):"","footer-full-view":this.subviews["footer-full-view"].get("container"),showPagination:r,isEmpty:this.get("totalItems").length===0,isViewingSelf:this.nsid===this.appContext.getViewer().nsid},this.setContainerHTML(this.templates("albums-list-page")(e)),this},buildHeadContainer:function(){YUI.Env.isServer?this.set("headContainer",""):(this.set("headContainer",this.subviews["pagination-view"].get("headContainer")),this.updateHead())},showErrorModal:function(t){var n;n=new e.Views.FluidModal({appContext:this.appContext,darkOverlay:!0,dismissOnOverlayClick:!0,showCancelButton:!1,actionButtonLabel:this.intlMessage({intlName:"common.OK"}),title:this.intlMessage({intlName:"common.UPLOAD_ERROR_TITLE"}),message:t}),n.show()},createBook:function(t){var n=this;return this.showBalls(),e.rapidTracker.beacon(this.name,"createBook"),this.appContext.getModelRegistry("book-models").then(function(e){return e.remoteCreate({photoset_id:t}).then(function(e){n.hideBalls(),n.appContext.flapp.navigate("/create/books/"+e.id+"/cover")})}).catch(function(e){n.hideBalls(),n.showErrorModal("There was a problem creating the book. Please try again later")})},showBalls:function(){this.balls||(this.balls=e.Node.create('<div class="loading-balls"></div>'),this.balls.setHTML(this.templates("flickr-balls")({}))),this.get("container").append(this.balls)},hideBalls:function(){this.balls.remove()},downloadAlbum:function(t){var n=this,r;e.rapidTracker.beacon(this.name,"openDownloadAlbum"),r=this.bulkDownloaderView.showLoadingDialog(),this.bulkDownloaderView.prepareArchive({set_id:t}).then(function(e){r.close(),n.bulkDownloaderView.showDownloadDialog(e)}).catch(function(e){r.close(),n.bulkDownloaderView.onError(e)})},shareAlbum:function(t,n){var r=new e.Views.FluidShareAlbumView({appContext:this.appContext,albumId:t});this.showBalls(),e.rapidTracker.beacon(this.name,"openShareAlbum"),r.on("sharePresentationClose",r.destroy.bind(r)),r.initialize().then(function(){this.prepareModal(n)}.bind(r)).then(function(){this.hideBalls()}.bind(this)).catch(function(e){this.hideBalls()}.bind(this))},deleteAlbum:function(t){var n=this;return e.rapidTracker.beacon(this.name,"deleteAlbum"),this.showBalls(),this.confirmAlbumDelete(t).then(function(){return n.appContext.getModelRegistry("set-models").then(function(r){return r.remoteDelete(t).then(function(){n.get("albumsListModel").getValue("albumsList").remove(t),n.appContext.flapp.navigate(e.config.doc.location.href)})})}).catch(function(t){t&&e.Flog.error("Error deleting album: ",t),n.hideBalls()})},confirmAlbumDelete:function(t){var n=this;return e.rapidTracker.beacon(this.name,"deleteConfirm"),new e.Promise(function(t,r){var i=new e.Views.FluidModal({appContext:n.appContext,title:n.intlMessage({intlName:"common.CONFIRMATION"}),message:n.intlMessage({intlName:"album-page.CONFIRM_ALBUM_DELETE_NO_CONTENTS_DELETED"})});n.registerEventHandler(i.on("actionClick",function(){t()})),n.registerEventHandler(i.on("cancelClick",function(){e.rapidTracker.beacon(n.name,"cancelDeleteConfirm"),r()})),i.show()})},handleClick:function(e){var t=e.target,n,r;t.hasClass("cta")&&(e.halt(),n=t.ancestor(".photo-list-album-interaction"),r=n.getData("albumId"),t.hasClass("is-disabled")||(t.hasClass("share")?this.shareAlbum(r,t):t.hasClass("book")?this.createBook(r):t.hasClass("download")?this.downloadAlbum(r):t.hasClass("trash")&&this.deleteAlbum(r)))},destructor:function(){this.balls&&this.balls.inDoc()&&this.balls.remove(),this.balls=null,this.bulkDownloaderView&&
this.bulkDownloaderView.destroy()},activate:function(){return this.registerEventHandler(this.get("container").on("click",this.handleClick,this)),this.bulkDownloaderView=new e.BulkDownloaderView({appContext:this.appContext}),this},getTrackingSegments:function(){return{vwrOwner:this.isOwner?1:0}}},{ATTRS:{spaceid:{value:792600578}}})},"@VERSION@",{requires:["flutil","flickr-view","flickr-promise","hermes-template-albums-list-page","favorites-page-css","global-nav-view","footer-full-view","pagination-view","fluid-photostream-coverphoto-view","fluid-share-album-view","albums-list-page-css","hermes-template-flickr-balls","fluid-balls-css","album-list-toolbar-view","hermes-template-head-link","photolist-aft-helper"],optionalRequires:["bulk-downloader-view"],optional:["sets-models","book-models"],langBundles:["album-page","common","magic-empty-states","meta"]});
YUI.add("hermes-lang-magic-empty-states",function(e,t){e.Intl.add("hermes/magic-empty-states","en-US",{PHOTOSTREAM_EMPTY:["You have no public photos"],PHOTOSTREAM_EMPTY_OTHER:["This user has no public photos"],PHOTOSTREAM_EMPTY_ACTION:["Upload photos"],ALBUM_EMPTY:["You have no albums"],ALBUM_EMPTY_OTHER:["This user has no albums"],ALBUM_EMPTY_ACTION:["Create an album"],FAVORITES_EMPTY:["You have no favorites"],FAVORITES_EMPTY_OTHER:["This user has no favorites"],FAVORITES_EMPTY_ACTION:["Explore photos"],SHARED_ENTITY_EMPTY_OTHER:["Nothing shared"],CREATIONS_NO_WALLARTS:["Wall art and photo books. Created by you."],CREATIONS_NO_BOOKS:["Wall art and photo books. Created by you."],STATS_HEADLINE:["Introducing all new stats for Pro"],STATS_HEADLINE_1:["When it comes to stats. Know it all."],STATS_HEADLINE_2:["Everything you need to know. Statistically speaking."],STATS_HEADLINE_3:["Details. Details. Details."],STATS_HEADLINE_4:["The kind of minutia you\u2019ll like."],STATS_SUB_HEADLINE:["Gain an understanding of how people are discovering your Flickr photos. See which of your photos are trending now and which have performed the best over the life of your Flickr account."],STATS_SUB_HEADLINE_1:["Want to know how people are finding your photos on Flickr? Curious to  see which of your photos are trending now and which have performed the best over the life of your account? Get all the details and more."],FAVES_HEADLINE_YOU:["Start picking your faves. Just click on the star."],FAVES_SUBHEADLINE_YOU:["Like something you see? Let the photographer know by clicking on the star icon."],FAVES_HEADLINE_OTHERS:["${username}"," doesn't have any favorites yet. Stay tuned."],START_EXPLORING_FLICKR:["Start exploring Flickr"],CAMERAROLL_HEADLINE:["Got a lot of photos? We've got a lot of space."],CAMERAROLL_SUBHEADLINE:["Every flickr member gets 1,000 GB of photo storage for FREE. Every photo is safely stored and can be accessed from your computer, smart phone or tablet at any time &dash; from anywhere."],CAMERAROLL_SUBHEADLINE_MAGIC:["Your Magic View is empty because we have not found any relevant categories for your photos so far. Try uploading more photos with different subjects."],PHOTOSTREAM_HEADLINE_YOU:["Don't forget to upload your photos."],PHOTOSTREAM_SUBHEADLINE_YOU:["Your photostream is your public-facing portfolio. Upload photos and set them to public using the Camera Roll to populate your photostream."],START_UPLOADING:["Start uploading"],PHOTOSTREAM_HEADLINE_YOU_PUBLIC:["You have no public photos."],PHOTOSTREAM_SUBHEADLINE_YOU_PUBLIC:["Your photostream is your public-facing portfolio. Set your photos to public using the Camera Roll to populate your photostream."],PHOTOSTREAM_HEADLINE_YOU_FRIENDS:["You have no public photos."],PHOTOSTREAM_SUBHEADLINE_YOU_FRIENDS:["Your photostream is your public-facing portfolio. Set your photos to public using the Camera Roll to populate your photostream."],PHOTOSTREAM_HEADLINE_YOU_FAMILY:["You have no public photos."],PHOTOSTREAM_SUBHEADLINE_YOU_FAMILY:["Your photostream is your public-facing portfolio. Set your photos to public using the Camera Roll to populate your photostream."],PHOTOSTREAM_HEADLINE_YOU_FRIENDSFAMILY:["You have no public photos."],PHOTOSTREAM_SUBHEADLINE_YOU_FRIENDSFAMILY:["Your photostream is your public-facing portfolio. Set your photos to public using the Camera Roll to populate your photostream."],PHOTOSTREAM_HEADLINE_OTHERS:["${username}"," hasn't made any photos public yet."],ALBUMS_HEADLINE_YOU:["Let's make an album."],ALBUMS_SUBHEADLINE_YOU:["Easily organize all your photos into beautiful albums to share with friends, family, or even other Flickr members."],GO_TO_CAMERA_ROLL:["Go to Camera Roll"],ALBUMS_HEADLINE_OTHERS:["As soon as ","${username}"," puts the camera down, we may have an album to view."]})},"@VERSION@",{requires:["intl"]});
YUI.add("hermes-lang-meta",function(e,t){e.Intl.add("hermes/meta","en-US",{PHOTOSTREAM:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"photo on Flickr!",other:"${#} photos on Flickr!"}}],PHOTOSTREAM_NO_PHOTOS:["Explore ","${username}","'s photos on Flickr!"],ALBUMS_LIST:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"album on Flickr!",other:"${#} albums on Flickr!"}}],ALBUMS_LIST_NO_ALBUMS:["Explore ","${username}","'s albums on Flickr!"],FAVORITES:["Explore ","${username}","'s ",{type:"plural",valueName:"photoCount",options:{one:"favorites on Flickr!",other:"${#} favorites on Flickr!"}}],FAVORITES_NO_PHOTOS:["Explore ","${username}","'s favorites on Flickr!"],META_DESCRIPTION_BY_USER_ON_FLICKR:["By ","${username}"," on Flickr"],PHOTOSTREAM_ATOM_TITLE:["Flickr: ","${username}","'s Photostream Atom feed"],FAVORITES_ATOM_TITLE:["Flickr: ","${username}","'s Favorites Atom feed"],GROUP_POOL_ATOM_TITLE:["Flickr: ","${groupName}","'s Photos Atom feed"],GROUP_DISCUSSIONS_ATOM_TITLE:["Flickr: ","${groupName}","'s Discussions Atom feed"]})},"@VERSION@",{requires:["intl"]});
